---
layout: article
title: Scheduling
author: J_å®‹
tags: OperatingSystem í•œê¸€
mathjax: true
key: operatingSystem03
---



### Basic Concepts 

- ResourceëŠ” ë‘ê°€ì§€ ì¢…ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ
  - Preemptible Resource : í•œ Processê°€ ì ìœ í•œ ìƒíƒœì—ì„œ ë‹¤ë¥¸ Processì—ê²Œ ì–‘ë³´í•  ìˆ˜ ìˆëŠ” ìì›  (ex. Main memory)
  - Non-Preemptible Resource : í•œ Processê°€ ì ìœ í•˜ë©´ ì‚¬ìš©ì„ ë§ˆì¹  ë•Œ ê¹Œì§€ ë‹¤ë¥¸ Processì—ê²Œ ì–‘ë³´í•  ìˆ˜ ì—†ëŠ” ìì› (ex. Printer)
- Resource allocationì˜ 2ê°€ì§€ ë¬¸ì œ :
  1. ì—¬ëŸ¬ Processê°€ í•œ Resourceë¥¼ ì¡ì„ë ¤ê³  í•  ë•Œ ëˆ„êµ¬í•œí…Œ ì¤„ê²ƒì¸ê°€?
  2. ì¼ë‹¨ í•œ Processê°€ í•œ Resourceë¥¼ ì¡ìœ¼ë©´ ê²Œí•œí…Œ ì–¼ë§ˆë§Œí¼ ì˜¤ë˜ Resourceë¥¼ ë¶€ì—¬í•´ì¤„ê¹Œ?
- Resource allocation ë¬¸ì œì— ëŒ€í•œ ì˜ì‚¬ê²°ì •ì´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹¨

#### CPU Burst

- Job :vs: Process
  - Batch Monitorì—ì„œì˜ Job : í•œë²ˆ ìˆ˜í–‰ì´ ì‹œì‘ë˜ë©´ ì™„ë£Œë  ë•Œ ê¹Œì§€ ê³„ì† ìˆ˜í–‰ë˜ëŠ” ì‘ì—…
  - Process : ëë‚˜ì§€ ì•Šì€ Jobë“¤ì´ ì—¬ëŸ¬ê°œ ìˆìŒ

- CPU Burst : Programì˜ ìˆ˜í–‰ ì¤‘ì— ì—°ì†ì ìœ¼ë¡œ CPUë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¨ì ˆëœ êµ¬ê°„

  - CPU Burstê°€ Schedulingì˜ ë‹¨ìœ„ê°€ ë¨

- I/O Burst : Programì˜ ìˆ˜í–‰ ì¤‘ì˜ I/Oì˜ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ë©° Blockë˜ëŠ” êµ¬ê°„

   <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 11.25.34 AM.png" alt="Screen Shot 2021-09-03 at 11.25.34 AM" style="zoom: 30%;" />

- CPU Burstì˜ Size : ì´ Sizeì— ë”°ë¼ì„œ Scheduling ê¸°ë²•ì´ ë‹¬ë¼ì§„ë‹¤

   <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 11.30.07 AM.png" alt="Screen Shot 2021-09-03 at 11.30.07 AM" style="zoom:33%;" />

  - CPU Burstì˜ Sizeê°€ í° ê²ƒ : ê³¼í•™ ê¸°ìˆ ì˜ ì—°ì‚°
  -  CPU Burstì˜ Sizeê°€ ì‘ì€ ê²ƒ : I/O Interactive í•œ ê²ƒ

#### CPU Scheduler

- **CPU Schedulerê°€ ê²°ì •í•˜ëŠ” ì‘ì—…** :

1. *ì–´ë–¤ ì´ìœ ì—ì„ ê°€ í˜„ì¬ Processê°€ ìˆ˜í–‰ì„ ë” ì´ìƒ í•˜ì§€ ì•Šì•„ì•¼ë  ë•Œ, ë‹¤ìŒì— ì–´ë–¤ Processì—ê²Œ CPUë¥¼ ì¤„ê¹Œë¥¼ ê²°ì •í•˜ëŠ” ì‘ì—…*
2. *ê·¸ Processê°€ CPUë¥¼ í• ë‹¹ ë°›ìœ¼ë©´ ì–¼ë§ˆë‚˜ ì˜¤ë˜ë™ì•ˆ ìˆ˜í–‰í•  ê²ƒì¸ê°€ë¥¼ ê²°ì •í•˜ëŠ” ì‘ì—…*

- CPU SchedulerëŠ” ì–¸ì œ ì¼ì–´ë‚˜ë‚˜?

   <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic02/KakaoTalk_20210813_102816.png" alt="KakaoTalk_20210813_102816" style="zoom:43%;" />

  - Ready â¡ï¸ Running : Dispatcherê°€ ëŒì•„ì„œ ìƒíƒœ ë³€í™˜
  - Running â¡ï¸ Ready : Hardware Interruptê°€ ê±¸ë ¤ì„œ Schedulerê°€ ê°œì…ë˜ê³  ê°•ì œë¡œ CPUë¥¼ ëºìŒ
  - Running â¡ï¸ Waiting : Non-Preemptive scheduling
  - Running â¡ï¸ Terminated : Non-Preemptive scheduling
  - Waiting â¡ï¸ Ready : ì–´ë–¤ Processê°€ Waitingì—ì„œ Readyë¡œ ê°ˆë ¤ë©´ Asynchronous ì´ë²¤íŠ¸ê°€ ë°œìƒí•´ì•¼ëœë‹¤. Asynchronous ì´ë²¤íŠ¸ëŠ” Preemptive schedulingì„ ì´‰ë°œí•˜ëŠ” ê²ƒì´ë‹¤.
  - schedulingëŠ” Process state transitionì—ì„œ state transitionë¥¼ ì´‰ë°œí•˜ëŠ” í–‰ìœ„ë“¤ì´ë‹¤



### Scheduling Policies

- Schedulingì„ í†µí•´ì„œ ì„±ì·¨í•˜ê³ ì í•˜ëŠ” ê²ƒë“¤ :

  - Resource Utilizationì„ ê·¹ëŒ€í™”

    - Utilization : ì–´ë–¤ Resourceê°€ ì¡´ì¬í•˜ë©´ ì „ì²´ ì»´í“¨í„° Up timeì¤‘ì— ì–¼ë§ˆ ë§Œí¼ì˜ ì‹œê°„ë™ì•ˆ ì˜ë¯¸ìˆëŠ” ìˆ˜í–‰ì„ í–ˆëŠëƒë¥¼ ë‚˜íƒ€ëƒ„

  - Overheadë¥¼ ìµœì†Œí™” ì‹œí‚¤ê¸°

    - ì¦‰, OSê°€ ì°¸ì—¬í•˜ëŠ”ë° Codeì–‘ì´ ì ì–´ì•¼ëœë‹¤

  - Context switchingë¥¼ ìµœì†Œí™” ì‹œí‚¤ê¸°

    - ë¹ˆë²ˆí•˜ê²Œ Schedulerê°€ ëœ¨ê²Œë˜ë©´ context switchingì´ ë§ì•„ì§€ê²Œ ë¨

  - Fairness

    - CPU timeì„ ì—¬ëŸ¬ Processì—ê²Œ ê³¨ê³ ë£¨ ë‚˜ëˆ ì¤˜ì•¼ë¨

    - FairnessëŠ” ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§ :

      ğŸ’ğŸ» ë²”ìš© Systemì—ì„œ Fairness : 

      - 1/n ì˜ Share

      ğŸ’ğŸ» ìš°ì„ ìˆœìœ„ ê¸°ë°˜ Systemì—ì„œ Fairness : 

      - ë†’ì€ ìš°ì„ ìˆœìœ„ì˜ Processì—ê²Œ CPUë¥¼ ì£¼ëŠ” ê²ƒì´ Fairí•¨
      - ì–´ë–¤ ê²½ìš°ì—ëŠ” Fairí•˜ì§€ë§Œ ë°©ì¹˜í•˜ê²Œ ë˜ë©´ ë¬¸ì œê°€ ìƒê¹€
      - í•´ê²°ë°©ë²• : Aging - Taskê°€ CPUë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì— ë¹„ë¡€í•˜ì—¬ ìš°ì„ ìˆœìœ„ë¥¼ ì ì°¨ì ìœ¼ë¡œ ë†’ì´ëŠ” ê¸°ë²•

- Metricë“¤ :

  - waiting time MIN
  - response time MIN
    - response timeì— ë¯¼ê°í•œ Application : User Interactiveí•œ Application, Foreground App
  -  turnaround time MIN
  -  throughput MAX 
    - throughput : ë‹¨ìœ„ì‹œê°„ì— ì»´í“¨í„° ì‹œìŠ¤í…œì´ ìˆ˜í–‰ì„ ì¢…ë£Œì‹œí‚¤ëŠ” Processì˜ ê°œìˆ˜
    -  throughputì— ë¯¼ê°í•œ Application : CPU intensiveí•œ ê²ƒ
  - í˜„ëŒ€ OSëŠ”  throughputê³¼ response timeì˜ Balanceë¥¼ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ë¬¸ì œ

#### Scheduling ê¸°ë²•ë“¤

1. First In First Out (FIFO)

   - ë¨¼ì € ë“¤ì–´ì˜¨ë†ˆ ë¨¼ì € ì²˜ë¦¬
   - CPU Burst ë‹¨ìœ„ë¡œ FIFO : í•œ Processê°€ I/Oë¥¼ í•  ë•Œ ê¹Œì§€ CPUë¥¼ ì ìœ í•¨

   - ì¥ì  :

     1. ë‹¨ìˆœí•˜ê³  ì§ê´€ì ì„

   - ë‹¨ì  :

     1. CPUë¥¼ ë…ì í•  ìˆ˜ ìˆìŒ (ex. ì–´ë–¤ Processì˜ CPU Burstì•ˆì— ë¬´í•œ loopê°€ ì¡´ì¬ í•  ê²½ìš°)

        ğŸ’ğŸ» í•´ê²° ë°©ì•ˆ : Timer register ì‚¬ìš© 

   - FIFOì—ì„œ ê°€ì¥ ìµœì ì˜ Waiting timeì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë°©ë²• : 

     - scheduling sequenceê°€ shortest job first ë¥¼ ë”°ë¥´ê²Œ ê³„ì† ìˆœì„œë¥¼ ë°”ê¿ˆ 

       

2. Shortest Job First

   - Shortest Job FirstëŠ” Optimal algorithm

   - Shortest job firstë¥¼ í•  ê²½ìš°ì˜ ë¬¸ì œì  : OSê°€ Taskì˜ ë‚¨ì€ CPU Burst Sizeë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ì—†ìŒ

   - Preemptive Shortest Job First : 

     - í˜„ì¬ëŠ” ê°€ì¥ ì§§ì€ CPU Burst Sizeì˜ processì„ ìˆ˜í–‰í•˜ê³  ìˆëŠ”ë° ìƒˆë¡œìš´ CPU Burst Sizeê°€ ë” ì§§ì€ processê°€ ì™”ì„ ê²½ìš° rescheduling í•˜ê²Œë¨ 
     - a.k.a Shortest-Remaining-Time-First (SRTF)

   - Non-Preemptive Shortest Job First : 

     - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•Œê³ ë¦¬ì¦˜ 
     - ìš°ë¦¬ê°€ CPU Burst Sizeë¥¼ ë‹¤ ì•ˆë‹¤ëŠ” ê°€ì • í•˜ì˜ ì•Œê³ ë¦¬ì¦˜

   - CPU Burst Sizeë¥¼ ì˜ˆì¸¡í•˜ëŠ” ë°©ë²• :

     - Exponential averaging : 

        <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 12.47.53 PM.png" alt="Screen Shot 2021-09-03 at 12.47.53 PM" style="zoom:43%;" />

       ğŸ”º a = 0ë¡œ ì„¤ì • í•  ê²½ìš°, ê³¼ê±°ì˜ approximation ê°’ë§Œ ê³ ë ¤, ìµœê·¼ historyëŠ” ê³ ë ¤ âŒ

       ğŸ”º a = 1ë¡œ ì„¤ì • í•  ê²½ìš°, ë°”ë¡œ ì§€ë‚œ ë²ˆì˜ Burst Sizeë¥¼ ì´ë²ˆì˜ Burst Sizeë¡œ ë°›ì•„ë“œë¦¬ê² ë‹¤

       ğŸ”º 0<a<1 ì˜ ê°’ì„ í†µí•´ì„œ ìµœê·¼ historyì™€ ì§€ë‚œ ë²ˆì˜ ì˜ˆì¸¡í•œ ê°’ì˜ ë¹„ìœ¨ì„ ê²°ì •í•  ìˆ˜ ìˆìŒ

       ğŸ”º aì˜ ì„¤ì •ì´ ì¼€ë°”ì¼€ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œ OSì— ì ìš©ì‹œí‚¤ê¸´ ì–´ë ¤ì›€

       

3. Round Robin

   - FIFOë¡œ schedulingì„ í•˜ë˜ Time out ê°’ì„ ë‘”ë‹¤

     - ìê¸°ì˜ CPU Burst Sizeê°€ Time out ê°’ë³´ë‹¤ í¬ë©´ ìˆ˜í–‰ì„ ê°•ì œë¡œ ì¢…ë£Œ ë‹¹í•˜ê³  Ready Queue ê°€ì¥ ë’¤ë¡œ ê°„ë‹¤

   - Round Robin ë¬¸ì œ :  

     - Time out ê°’ì„ ì–¼ë§ˆë¡œ ë‘˜ê²ƒì¸ì§€?
     - Time Slice (Time Quantum) : Taskì—ê²Œ CPUê°€ í• ë‹¹ëœ í›„ ë‹¤ìŒ schdulingì„ ìœ„í•œ timer interruptê°€ ë°œìƒí•  ë•Œ ê¹Œì§€ì˜ ì‹œê°„ 

   - Round Robinì´ FIFOë³´ë‹¤ í•­ìƒ ì„±ëŠ¥ì´ ì¢‹ì€ ê±´ ì•„ë‹ˆë‹¤

     - FIFO == Round Robin  ( Time Quantum = âˆms )

   - *CPU Bound Process* : ëŒ€ë¶€ë¶„ ì‹œê°„ì„ CPU ì—°ì‚°ì„ í•˜ë©´ì„œ ë³´ë‚´ëŠ” Process

     - CPU Utilization ê³¼ Thoughtput ì´ ë†’ì„ ìˆ˜ë¡ ì¢‹ìŒ

   - *I/O Bound Process* : ëŒ€ë¶€ë¶„ ì‹œê°„ì„ I/Oë¥¼ ë³´ë‚¸ ë‹¤ìŒ waiting í•˜ë©´ì„œ ë³´ë‚´ê³  ì‹¤ì œ CPU ì—°ì‚° ì‹œê°„ì„ ì§§ê²Œê°€ì§€ëŠ” Process

     - Response timeì´ ì§§ì„ ìˆ˜ë¡ ì¢‹ìŒ

   - ***Example.*** 

     | Process No | Characteristic                                               |
     | ---------- | ------------------------------------------------------------ |
     | 1          | - 1ms ë™ì•ˆ CPUì—°ì‚° í•œ ë‹¤ìŒ  I/O ìœ ë°œì‹œì¼œì„œ 10msë™ì•ˆ ë…¸ëŠ” Process<br>- I/O Bound Process |
     | 2          | - I/O ì—†ì´  CPUì—°ì‚°ë§Œ í•˜ëŠ” Process <br>- CPU Bound Process   |

     Senario 1 : Round Robin ( Time Quantum = 100ms )

     - Process 1ê°€ ë¨¼ì € ìˆ˜í–‰ í•  ê²½ìš°

       <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 4.27.55 PM.png" alt="Screen Shot 2021-09-03 at 4.27.55 PM" style="zoom:53%;" />

     Senario 2 : Round Robin ( Time Quantum = 1ms )

     - Process 1ê°€ ë¨¼ì € ìˆ˜í–‰ í•  ê²½ìš°

       <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 4.28.08 PM.png" alt="Screen Shot 2021-09-03 at 4.28.08 PM" style="zoom:53%;" />

     ğŸ’ğŸ» CPU Utilization ê³¼ I/O Utilizationì„ ëª¨ë‘ ê³ ë ¤í•´ì„œ ë³¼ ë•Œ Senario 2ê°€ ì¢‹ìŒ 

     ğŸ’ğŸ» Process 1ì…ì¥ì—ì„œëŠ” Senario 2ì²˜ëŸ¼ time sliceê°€ ì ì€ ê²ƒì´ ì¢‹ì§€ë§Œ Process 2í•œí…Œ ìˆì–´ì„œëŠ” Penaltyê°€ ìˆìŒ ( Overhead ë¬¸ì œ : Process 2ì˜ time slice boundary ë§ˆë‹¤ time interruptê°€ ë°œìƒí•´ì„œ interrupt service routineì´ ëŒê²Œëœë‹¤ )

     ğŸ’ğŸ» ê²°ê³¼ì ìœ¼ë¡œ ë‘ Senario ëª¨ë‘ê°€ ìš°ë¦¬ê°€ ì›ì¹˜ì•ŠëŠ” ëª¨ìŠµë“¤ì„ ê°€ì§€ê³  ìˆë‹¤

     ğŸ’ğŸ» ê·¸ëŸ¼ ì´ ë¬¸ì œì˜ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„  

     â€‹	ğŸ”º CPU Bound Process í•œí…ŒëŠ” ê¸´ Time Quantumë¥¼ ì£¼ê³  

     â€‹	ğŸ”º I/O Bound Process í•œí…ŒëŠ” ì§§ì€ Time Quantumë¥¼ ì£¼ê³  ìš°ì„ ìˆœìœ„ë¥¼ ë†’ì—¬ì¤€ë‹¤

     

4. Multi-level Feedback Queue

   - Adaptive Scheduling : 

     - Workload(ì¦‰, process)ì˜ íŠ¹ì„±ì— ë”°ë¼ Time Quantumì˜ í¬ê¸°ë¥¼ ë™ì ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ”Scheduling ê¸°ë²•
     - Processë³„ë¡œ Processì˜ íŠ¹ì§•ì— ë”°ë¼ì„œ Schedulingë°©ì‹ì— ë³€í™”ë¥¼ ì¤„ ìˆ˜ ìˆìŒ

   - Multi-level Feedback Queue : Run Queueê°€ Multi-levelë¡œ ë˜ì–´ìˆìŒ

     - ê°€ì¥ ìœ„ì— ìˆëŠ” QueueëŠ” ìš°ì„ ìˆœìœ„ê°€ ë†’ê³  Time QuantumëŠ” ì§§ìŒ

     - ë°‘ì˜ level Queueì¼ ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ëŠ” ë‚®ê³  Time QuantumëŠ” ê¸¸ë‹¤

        <img src="/assets/images/æ“ä½œç³»ç»Ÿ/pic03/Screen Shot 2021-09-03 at 4.48.25 PM.png" alt="Screen Shot 2021-09-03 at 4.48.25 PM" style="zoom:43%;" />

     - ìƒˆë¡œìš´ Processê°€ ìƒì„±ì´ ë˜ë©´, ê·¸ ProcessëŠ” ë¬´ì¡°ê±´ ê°€ì¥ ìš°ì„ ìˆœìœ„ ë†’ì€ Queueì— ë“¤ì–´ê°€ Round Robinì„ í•œë‹¤ 

     - ê·¸ëŸ°ë° Round Robiní•˜ë‹¤ê°€ ìê¸°ì˜ Time Quantumë³´ë‹¤ ë” ë¹¨ë¦¬ ëë‚¬ìœ¼ë©´ ê·¸ Queueì— ë¨¸ë¬¼ëŸ¬ ìˆê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë°‘ì— levelì˜ Queueë¡œ ê°•ë“±í•˜ê²Œë¨



5. Fair Share Scheduling
   - a.k.a Bandwidth Scheduling, Proportional Share Scheduling
   - ëŒ€ê¸° ì¤‘ì¸ Processë“¤ì—ê²Œ ì •í•´ì§„ ë¹„ìœ¨ì— ë”°ë¼ CPUì˜ Bandwidthë¥¼ ë¶„ë°°í•˜ëŠ” Scheduling ê¸°ë²•
   - ìµœê·¼ì—ëŠ” 1/n Schedulingë„ ì•„ë‹ˆê³  ìš°ì„ ìˆœìœ„ Schedulingë„ ì•„ë‹Œ Bandwidth Schedulingì´ ë¶€ê°í•˜ê¸° ì‹œì‘í•¨
   - Performance isolation í•  ë•Œë„ Bandwidth Schedulingì´ í•„ìš”í•¨
     - Performance isolation : CPUë¥¼ ë§ì´ ì°¨ì§€í•  êº¼ ê°™ì€ APPì´ ë“¤ì–´ì™”ì„ ë•Œ ê·¸ APPì˜ ì˜í–¥ì„ ê²©ë¦¬ì‹œí‚¤ëŠ” ê²ƒ
   - Linuxì—ëŠ” CFS (Completely Fair Scheduler)ì´ë¼í•˜ëŠ” Bandwidth Scheduling Algorithmì´ í¬í•¨ë˜ì–´ ìˆìŒ



***

ã€ŠReferenceã€‹

1. <a href="https://youtube.com/playlist?list=PL_1QkD8uy-Nal28iaDIZAIrPfCcJeSuj3">SNUON Youtube</a>



***

